{
  "metadata" : {
    "version" : "1.1.395.0",
    "origin" : "",
    "description" : "created for testing reactFlow",
    "tags" : [ ]
  },
  "workflow" : [ {
    "name" : "parameters",
    "type" : "parameter",
    "nodeType" : "parameter",
    "description" : "",
    "properties" : {
      "delta" : "paramValue",
      "TESTKEY" : "TESTVAL"
    }
  }, {
    "name" : "action_trigger_1",
    "type" : "datamorphairflow.actions.empty.DMEmptyOperator",
    "nodeType" : "trigger",
    "description" : "",
    "properties" : {
      "dependsOn" : [ ],
      "ui" : {
        "x" : 105,
        "y" : 105
      },
      "id" : "dndnode_0.6652775549718215"
    }
  }, {
    "name" : "branch_Edit",
    "type" : "datamorphairflow.actions.branch.DMBranchOnReturnValueOperator",
    "nodeType" : "action",
    "description" : "demo desc",
    "properties" : {
      "retries" : 0,
      "dependsOn" : [ "action_trigger_1" ],
      "retry_delay" : 0,
      "ui" : {
        "x" : 270,
        "y" : 105
      },
      "id" : "dndnode_0.5563073988398408",
      "branches" : [ {
        "name" : "test",
        "properties" : {
          "match_expression" : "Success",
          "branch" : [ "email_1" ]
        }
      }, {
        "name" : "testNew",
        "properties" : {
          "match_expression" : "failure",
          "branch" : [ "email_2" ]
        }
      }, {
        "name" : "demo",
        "description" : "test",
        "properties" : {
          "match_expression" : "TRUE",
          "branch" : [ "email_4" ]
        }
      } ]
    }
  }, {
    "name" : "email_1",
    "type" : "datamorphairflow.actions.email.DMEmailOperator",
    "nodeType" : "action",
    "description" : "",
    "properties" : {
      "cc" : "cc",
      "retries" : 0,
      "outputTo" : [ "Success", "Failure" ],
      "html_content" : "body",
      "from_id" : "from",
      "bcc" : "",
      "dependsOn" : [ "branch_Edit:test" ],
      "retry_delay" : 0,
      "ui" : {
        "x" : 450,
        "y" : 30
      },
      "subject" : "sub",
      "to" : "to",
      "id" : "dndnode_0.47596146107986614"
    }
  }, {
    "name" : "email_2",
    "type" : "datamorphairflow.actions.email.DMEmailOperator",
    "nodeType" : "action",
    "description" : "",
    "properties" : {
      "cc" : "cc",
      "retries" : 0,
      "outputTo" : [ "Success", "Failure" ],
      "html_content" : "body",
      "from_id" : "from",
      "bcc" : "",
      "dependsOn" : [ "branch_Edit:test1Edit", "branch_Edit:test1Edited", "branch_Edit:testNew" ],
      "retry_delay" : 0,
      "ui" : {
        "x" : 450,
        "y" : 105
      },
      "subject" : "sub",
      "to" : "to",
      "id" : "dndnode_0.5205910569467236"
    }
  }, {
    "name" : "email_4",
    "type" : "datamorphairflow.actions.email.DMEmailOperator",
    "nodeType" : "action",
    "description" : "",
    "properties" : {
      "cc" : "cc",
      "retries" : 0,
      "outputTo" : [ "Success", "Failure" ],
      "html_content" : "body",
      "from_id" : "from",
      "bcc" : "",
      "dependsOn" : [ "branch_Edit:demoTest", "branch_Edit:demoTest123", "branch_Edit:demo" ],
      "retry_delay" : 0,
      "ui" : {
        "x" : 450,
        "y" : 180
      },
      "subject" : "sub",
      "to" : "to",
      "id" : "dndnode_0.9823466242749466"
    }
  }, {
    "name" : "sense_incoming_csv_file_1",
    "type" : "airflow.sensors.s3_key_sensor.S3KeySensor",
    "nodeType" : "trigger",
    "description" : "Use this file sensor to sense any incoming CSV files at the configured file path",
    "properties" : {
      "dependsOn" : [ ],
      "poke_interval" : 30,
      "icon" : "https://dev-api.datamorph.ai/iconslight/files.svg",
      "extras" : "File Sensor",
      "label" : "sense_incoming_csv_file",
      "timeout" : 300,
      "retries" : 0,
      "wildcard_match" : true,
      "retry_delay" : 0,
      "ui" : {
        "x" : 50,
        "y" : 364.5
      },
      "bucket_key" : "s3://datamorph-demo/datasets/covid_case_surveillance/markers/preprocessed/covid_data.csv.marker",
      "width" : 114,
      "style" : {
        "backgroundColor" : "#F5785F"
      },
      "position" : {
        "x" : 25,
        "y" : 25
      },
      "id" : "dndnode_0.8617879045174706",
      "height" : 65
    }
  }, {
    "name" : "covid_extract_pipeline_1",
    "type" : "datamorphairflow.actions.databricks.DMDatabricksRunNowJobOperator",
    "nodeType" : "action",
    "description" : "",
    "properties" : {
      "polling_period_seconds" : 30,
      "dependsOn" : [ "sense_incoming_csv_file_1" ],
      "icon" : "https://dev-api.datamorph.ai/iconslight/pipeline.svg",
      "extras" : "Pipeline",
      "databricks_retry_limit" : 3,
      "label" : "covid_extract_pipeline",
      "retries" : 0,
      "outputTo" : [ "Success", "Failure" ],
      "retry_delay" : 0,
      "ui" : {
        "x" : 240,
        "y" : 365.5
      },
      "width" : 114,
      "pipeline_id" : 1802,
      "style" : {
        "backgroundColor" : "#424EBC"
      },
      "position" : {
        "x" : 215,
        "y" : 26
      },
      "id" : "dndnode_0.5138440902070882",
      "height" : 65
    }
  }, {
    "name" : "post_process_1",
    "type" : "airflow.operators.bash.BashOperator",
    "nodeType" : "action",
    "description" : "Move the processed_file",
    "properties" : {
      "dependsOn" : [ "covid_extract_pipeline_1:Success" ],
      "trigger_rule" : "all_success",
      "icon" : "https://dev-api.datamorph.ai/iconslight/bash.svg",
      "extras" : "Bash",
      "bash_command" : "aws s3 mv s3://datamorph-demo/datasets/covid_case_surveillance/markers/preprocessed/covid_data.csv.marker s3://datamorph-demo/datasets/covid_case_surveillance/markers/processed/covid_data.csv.marker",
      "label" : "post_process",
      "retries" : 0,
      "outputTo" : [ "Success", "Failure" ],
      "retry_delay" : 0,
      "ui" : {
        "x" : 465,
        "y" : 360
      },
      "width" : 114,
      "style" : {
        "backgroundColor" : "#424EBC"
      },
      "position" : {
        "x" : 416,
        "y" : 30
      },
      "id" : "dndnode_0.43673529515334986",
      "height" : 65
    }
  }, {
    "name" : "success_1",
    "type" : "datamorphairflow.actions.email.DMEmailOperator",
    "nodeType" : "action",
    "description" : "",
    "properties" : {
      "from_id" : "datamorph@kwartile.com",
      "dependsOn" : [ "post_process_1:Success" ],
      "subject" : "DataMorph Application Success Message",
      "trigger_rule" : "all_success",
      "icon" : "https://dev-api.datamorph.ai/iconslight/email.svg",
      "extras" : "Email",
      "label" : "success",
      "retries" : 0,
      "outputTo" : [ "Success", "Failure" ],
      "html_content" : "Covid Surveillance Pipeline Success Message",
      "retry_delay" : 0,
      "ui" : {
        "x" : 645,
        "y" : 360
      },
      "width" : 114,
      "style" : {
        "backgroundColor" : "#424EBC"
      },
      "position" : {
        "x" : 651,
        "y" : 29
      },
      "to" : "vinay.joshi@kwartile.com",
      "id" : "dndnode_0.5032285957518907",
      "height" : 65
    }
  }, {
    "name" : "failure_1",
    "type" : "airflow.contrib.operators.slack_webhook_operator.SlackWebhookOperator",
    "nodeType" : "action",
    "description" : "",
    "properties" : {
      "dependsOn" : [ "covid_extract_pipeline_1:Failure", "post_process_1:Failure" ],
      "trigger_rule" : "one_failed",
      "icon" : "https://dev-api.datamorph.ai/iconslight/slack.svg",
      "channel" : "#datamorph-workflow-notifications",
      "extras" : "Slack",
      "label" : "failure",
      "message" : "Covid case workflow failure notification",
      "webhook_token" : "/T0EJ4596J/B042AFK5LCC/JdN2OD1lbXLzfZyATgFNLjAg",
      "retries" : 0,
      "outputTo" : [ "Success", "Failure" ],
      "retry_delay" : 0,
      "ui" : {
        "x" : 558,
        "y" : 535.5
      },
      "width" : 114,
      "style" : {
        "backgroundColor" : "#424EBC"
      },
      "position" : {
        "x" : 533,
        "y" : 196
      },
      "id" : "dndnode_0.6934868537761762",
      "height" : 65,
      "username" : "DataMorph Workflow Notification",
      "http_conn_id" : "datamorph_slack"
    }
  } ]
}